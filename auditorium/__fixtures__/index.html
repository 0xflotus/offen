<!DOCTYPE html>
<html>
<head>
  <title>auditorium test</title>
</head>
<body>
  <script type="text/javascript">
    var loginResponses = [
      {
        type: 'LOGIN_SUCCESS',
        payload: null
      },
      {
        type: 'ERROR',
        payload: {
          error: 'Session expired',
          status: 401
        }
      },
      {
        type: 'ERROR',
        payload: {
          error: 'did not work',
          status: 500
        }
      }
    ]
    var loginCalled = 0
    window.addEventListener('message', function (event) {
      if (event.data.type === 'QUERY') {
        event.source.postMessage({
          responseTo: event.data.respondWith,
          payload: {
            result: {
              value: 99
            }
          }
        }, '*')
      }
      if (event.data.type === 'LOGIN') {
        event.source.postMessage(Object.assign(loginResponses[loginCalled], {
          responseTo: event.data.respondWith
        }), '*')
        loginCalled++
      }
    })
  </script>
</body>
</html>
